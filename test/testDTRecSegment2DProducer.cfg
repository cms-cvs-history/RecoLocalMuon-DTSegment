##
# Test the 2D-segments Producer  
# 
# HOW TO use it
#
# * default config: 
#	- starts from digi
#	- uses the Parametrized Drift Velocity for the 1D RecHit Production
#	- uses the Parametrized Drift Velocity for the 1D RecHit Update
#	- doesn't call the DTRecSegment2DReader module
# 
# * if you want to start from 1D Rec Hit	
#	- change the source ("_Input_" field)
#	- comment the lines which follows the "_Vdrift1D_" field
#	- remove from the module-execution path the name: "dtrechitbuilder"
#
#  * if you want to switch to Linear Drift Velocity in 1DRecHits Production
#	- invert the comment in the two lines which
#	  follow the "_Vdrift1D_" field
#
#  * if you want to switch to Linear Drift Velocity in 1DRecHits updating
#	- invert the comment in the two lines which
#	  follow the "_Vdrift2D_" field
#
#  * if you want the reader
#	- uncomment the lines which follow the "_Reader_" field
#	- add "recseg2danalizer" (with out apices) at the end of the 
#	  module-execution path (the line which follows "_ExecPath_")	
##

process PROD = {

	source = PoolSource{ 
			    ## _Input_ ##
#	    		    untracked vstring fileNames = {"file:/afs/cern.ch/cms/Physics/muon/CMSSW/DT/samples/2006-05-04/rechit1D.root"} 
	    	  	    untracked vstring fileNames = {"file:/afs/cern.ch/cms/Physics/muon/CMSSW/DT/samples/2006-04-10/digi.root"} 

	          	    untracked int32 maxEvents = -1
		  	    untracked uint32 debugVebosity = 10
                  	    untracked bool   debugFlag     = true
  		  	   }

	service = MessageLogger {
#			   untracked vstring destinations = {"warning.txt","error.txt","stndoutput.txt"}
#			   untracked PSet warning.txt     = { untracked string threshold = "WARNING" }
#			   untracked PSet error.txt       = { untracked string threshold = "ERROR"   }
#			   untracked PSet stndoutput.txt  = { untracked string threshold = "INFO"    }
#	
#			   untracked vstring fwkJobReports = {"FrameworkJobReport.xml"}
#			   untracked vstring categories = { "FwkJob" }
#			   untracked PSet FrameworkJobReport.xml = {
#	        		                     untracked PSet default = { untracked int32 limit = 0 }
#	                        		     untracked PSet FwkJob = { untracked int32 limit = 10000000 }
#	                        		}
				}

	include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
	include "Geometry/MuonCommonData/data/muonIdealGeometryXML.cfi"
	include "Geometry/DTGeometry/data/dtGeometry.cfi"

	## _Vdrift1D_ ##
	include "RecoLocalMuon/DTRecHit/data/DTRecHit1DProducer_ParamDrift.cfi"
#	include "RecoLocalMuon/DTRecHit/data/DTRecHit1DProducer_LinearDrift.cfi"

	## _Vdrift2D_ ##
	include "RecoLocalMuon/DTSegment/data/DTSegment2DProducer_CombPatternReco2D_ParamDrift.cfi"
#	include "RecoLocalMuon/DTSegment/data/DTSegment2DProducer_CombPatternReco2D_LinearDrift.cfi"

	## _Reader_ ##
#	module recseg2danalizer = DTRecSegment2DReader {
#							untracked bool debug = true
#							untracked string rootFileName = "seg2D.root"
#							string recHits2DLabel = "DTSegment2DProducer"
# 		 				       }

	module out = PoolOutputModule {
				       untracked string fileName ="/tmp/rechit2D.root"
		  		      }

	## _ExecPath_ ##
	path p = {DTRecHit1DProducer, DTSegment2DProducer}

	endpath this_is_the_end = {out}
}
