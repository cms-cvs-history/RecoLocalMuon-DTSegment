process PROD = {
  source = PoolSource {
    untracked string fileName = 'evtgen_detsim_digi_pileup.root'
      untracked int32 maxEvents = 10
      untracked uint32 debugVebosity = 10
      untracked bool   debugFlag     = true
  }


#      es_source magfield = XMLIdealGeometryESSource {
#               FileInPath GeometryConfiguration = "SimG4Core/Application/test/FieldConfiguration.xml"
#               string rootNodeName ="MagneticFieldVolumes:MAGF"        
#               }


  es_module = VolumeBasedMagneticFieldESProducer {
    double findVolumeTolerance = 0.0
      untracked bool cacheLastVolume = true
      untracked bool timerOn = false
  }     


  es_source = XMLIdealGeometryESSource 
  { #FileInPath GeometryConfiguration = "SimG4Core/Application/test/SimConfiguration.xml"
    FileInPath GeometryConfiguration = "Geometry/DTGeometry/test/muonConfiguration.xml"
      string rootNodeName = "cms:CMSE"
#string rootNodeName = ""
  }


  es_module = DTGeometryESModule{}

  module rechitbuilder = DTRecHitProducer {
    untracked bool debug = true

# The reconstruction algo and its parameter set
      string recAlgo = 'DTLinearDriftAlgo'
      PSet recAlgoConfig = {
# The module to be used for ttrig synchronization and its paraemter set
        string tTrigMode = 'DTTTrigSyncTOFCorr'
          PSet tTrigModeConfig = {
            untracked bool debug = true
              double tTrig = 500
              double vPropWire = 24.4
              int32 tofCorrType = 0
          }           
        double driftVelocity = 0.00543
          double minTime = -3
          double maxTime = 415
          double hitResolution = 0.02
          untracked bool debug = true
      }
  }

  module recseg2dbuilder = DTRecSegment2DProducer {
    untracked bool debug = true
      unsigned int MaxAllowedHits = 100
      float AlphaMaxTheta = 1.0
      float AlphaMaxPhi = 0.1

# The reconstruction algo and its parameter set
      string recAlgo = 'DTCombinatorialPatternReco'
      PSet recAlgoConfig = {
      }
  }

  module recseg2danalizer = DTRecSegmentReader {
    untracked bool debug = true
    untracked string rootFileName = "seg.root"
  }

  module out = PoolOutputModule {
    untracked string fileName ="rechit.root"
  }


  path p = {rechitbuilder, recseg2dbuilder,recseg2danalizer, out}

}

